<!DOCTYPE html>
<html lang="en">
    <%- include("partials/head") %>

    <body>
        <%- include("partials/header") %>
        <main>
            <div class="container-xl mx-auto p-0 m-0 row">
                <div class="col-12 d-flex justify-content-center mt-2">
                    <h3 class="mx-auto mt-2 unline">Editar pelicula:</h3>
                </div>
                <div class="col-12 d-flex justify-content-center mt-2">
                    <h4 class="mx-auto mt-2"><%= movie.title %></h4>
                </div>
                <div class="col-12">
                    <div class="col-12 mt-2">
                        <% if (typeof errors != "undefined"){ %>
                        <div class="col-12" style="color: red;">ERROR!!</div>
                        <ul>
                            <% for (let i = 0; i < errors.length; i++){ %>
                            <li class="col-12 mt-2"><%= errors[i].msg %></li>
                            <% } %>
                        </ul>
                        <% } %>
                    </div>
                    <form
                        action="/movies/edit/<%= movie.id %>?_method=put "
                        method="POST"
                        class="col-12"
                    >
                        <div class="form-group col-12">
                            <label for="title" class="col-form-label"
                                >Titulo</label
                            >
                            <div>
                                <input
                                    type="text"
                                    name="title"
                                    id="title"
                                    class="form-control"
                                    value="<%= movie.title %>"
                                    required
                                />
                            </div>
                        </div>
                        <div class="form-group col-12">
                            <label for="awards" class="col-form-label"
                                >Premios</label
                            >
                            <div>
                                <input
                                    type="number"
                                    name="awards"
                                    id="awards"
                                    class="form-control"
                                    value="<%= movie.awards %>"
                                    required
                                />
                            </div>
                        </div>
                        <div class="form-group col-12">
                            <label for="revenue" class="col-form-label"
                                >Recaudacion</label
                            >
                            <div>
                                <input
                                    type="text"
                                    name="revenue"
                                    id="revenue"
                                    class="form-control"
                                    value="<%= movie.revenue %>"
                                />
                            </div>
                        </div>
                        <div class="form-group col-12">
                            <label for="release_date" class="col-form-label"
                                >Fecha de estreno</label
                            >
                            <div>
                                <input
                                    type="date"
                                    name="release_date"
                                    id="release_date"
                                    class="form-control"
                                    value="<%= moment(movie.release_date).format("YYYY-MM-DD")%>"
                                    required
                                />
                            </div>
                        </div>
                        <div class="form-group col-12">
                            <label for="length" class="col-form-label"
                                >Duracion</label
                            >
                            <div>
                                <input
                                    type="number"
                                    name="length"
                                    id="length"
                                    class="form-control"
                                    value="<%= movie.length %>"
                                    required
                                />
                            </div>
                        </div>
                        <div class="form-group col-12">
                            <label for="genre_id" class="col-form-label"
                                >Genero</label
                            >
                            <div>
                                <select
                                    class="custom-select"
                                    name="genre_id"
                                    id="genre_id"
                                    required
                                >
                                    <% for (let i = 0; i < genre.length; i++){%>
                                    <option value="<%=genre[i].id%>"<%= movie.genre_id == genre[i].id ? "selected" : ""%>
                                        ><%= genre[i].name %>
                                    </option>
                                    <% } %>
                                </select>
                            </div>
                        </div>
                        <div class="col-12 mb-2">
                            <button class="btn btn-warning button-wd" type="submit">
                                Editar
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </main>
        <%- include("partials/footer") %>
    </body>
</html>
